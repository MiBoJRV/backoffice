import{r as i,a as j}from"./react-e4f9e9db.js";import{m as I,D as z,a as B,R as V,u as K,N as M,b as N,c as A,d as H,e as W}from"./react-router-1f7ddfb2.js";import{c as G,b as X,E as q,s as J,d as k}from"./@remix-run-e2fd8c25.js";/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function L(){return L=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},L.apply(this,arguments)}function Q(e,n){if(e==null)return{};var t={},a=Object.keys(e),r,s;for(s=0;s<a.length;s++)r=a[s],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}function Y(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Z(e,n){return e.button===0&&(!n||n==="_self")&&!Y(e)}const $=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function we(e,n){return G({basename:n==null?void 0:n.basename,future:L({},n==null?void 0:n.future,{v7_prependBasename:!0}),history:X({window:n==null?void 0:n.window}),hydrationData:(n==null?void 0:n.hydrationData)||ee(),routes:e,mapRouteProperties:I,window:n==null?void 0:n.window}).initialize()}function ee(){var e;let n=(e=window)==null?void 0:e.__staticRouterHydrationData;return n&&n.errors&&(n=L({},n,{errors:te(n.errors)})),n}function te(e){if(!e)return null;let n=Object.entries(e),t={};for(let[a,r]of n)if(r&&r.__type==="RouteErrorResponse")t[a]=new q(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let o=new s(r.message);o.stack="",t[a]=o}catch{}}if(t[a]==null){let s=new Error(r.message);s.stack="",t[a]=s}}else t[a]=r;return t}const ne=i.createContext({isTransitioning:!1}),re=i.createContext(new Map),ie="startTransition",P=j[ie];function ae(e){P?P(e):e()}class se{constructor(){this.status="pending",this.promise=new Promise((n,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",n(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}}function ve(e){let{fallbackElement:n,router:t,future:a}=e,[r,s]=i.useState(t.state),[o,w]=i.useState(),[f,l]=i.useState({isTransitioning:!1}),[c,g]=i.useState(),[v,x]=i.useState(),[m,E]=i.useState(),T=i.useRef(new Map),{v7_startTransition:C}=a||{},y=i.useCallback(u=>{C?ae(u):u()},[C]),d=i.useCallback((u,R)=>{let{deletedFetchers:p,unstable_viewTransitionOpts:S}=R;p.forEach(_=>T.current.delete(_)),u.fetchers.forEach((_,F)=>{_.data!==void 0&&T.current.set(F,_.data)}),!S||t.window==null||typeof t.window.document.startViewTransition!="function"?y(()=>s(u)):v&&c?(c.resolve(),v.skipTransition(),E({state:u,currentLocation:S.currentLocation,nextLocation:S.nextLocation})):(w(u),l({isTransitioning:!0,currentLocation:S.currentLocation,nextLocation:S.nextLocation}))},[t.window,v,c,T,y]);i.useLayoutEffect(()=>t.subscribe(d),[t,d]),i.useEffect(()=>{f.isTransitioning&&g(new se)},[f.isTransitioning]),i.useEffect(()=>{if(c&&o&&t.window){let u=o,R=c.promise,p=t.window.document.startViewTransition(async()=>{y(()=>s(u)),await R});p.finished.finally(()=>{g(void 0),x(void 0),w(void 0),l({isTransitioning:!1})}),x(p)}},[y,o,c,t.window]),i.useEffect(()=>{c&&o&&r.location.key===o.location.key&&c.resolve()},[c,v,r.location,o]),i.useEffect(()=>{!f.isTransitioning&&m&&(w(m.state),l({isTransitioning:!0,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),E(void 0))},[f.isTransitioning,m]);let h=i.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:u=>t.navigate(u),push:(u,R,p)=>t.navigate(u,{state:R,preventScrollReset:p==null?void 0:p.preventScrollReset}),replace:(u,R,p)=>t.navigate(u,{replace:!0,state:R,preventScrollReset:p==null?void 0:p.preventScrollReset})}),[t]),b=t.basename||"/",D=i.useMemo(()=>({router:t,navigator:h,static:!1,basename:b}),[t,h,b]);return i.createElement(i.Fragment,null,i.createElement(z.Provider,{value:D},i.createElement(B.Provider,{value:r},i.createElement(re.Provider,{value:T.current},i.createElement(ne.Provider,{value:f},i.createElement(V,{basename:b,location:r.location,navigationType:r.historyAction,navigator:h},r.initialized?i.createElement(oe,{routes:t.routes,state:r}):n))))),null)}function oe(e){let{routes:n,state:t}=e;return K(n,void 0,t)}const le=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=i.forwardRef(function(n,t){let{onClick:a,relative:r,reloadDocument:s,replace:o,state:w,target:f,to:l,preventScrollReset:c,unstable_viewTransition:g}=n,v=Q(n,$),{basename:x}=i.useContext(M),m,E=!1;if(typeof l=="string"&&ue.test(l)&&(m=l,le))try{let d=new URL(window.location.href),h=l.startsWith("//")?new URL(d.protocol+l):new URL(l),b=J(h.pathname,x);h.origin===d.origin&&b!=null?l=b+h.search+h.hash:E=!0}catch{}let T=N(l,{relative:r}),C=ce(l,{replace:o,state:w,target:f,preventScrollReset:c,relative:r,unstable_viewTransition:g});function y(d){a&&a(d),d.defaultPrevented||C(d)}return i.createElement("a",L({},v,{href:m||T,onClick:E||s?a:y,ref:t,target:f}))});var U;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(U||(U={}));var O;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(O||(O={}));function ce(e,n){let{target:t,replace:a,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:w}=n===void 0?{}:n,f=A(),l=H(),c=W(e,{relative:o});return i.useCallback(g=>{if(Z(g,t)){g.preventDefault();let v=a!==void 0?a:k(l)===k(c);f(e,{replace:v,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:w})}},[l,f,c,a,r,t,e,s,o,w])}export{me as L,ve as R,we as c};
